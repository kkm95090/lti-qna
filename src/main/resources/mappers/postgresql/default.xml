<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lti.launch.db.mybatis.mapper.postgresql.PostgresSqlSampleMapper">

    <select id="findAll" resultType="HashMap">
            select * from courses
    </select>

    <select id="findCourseByID" resultType="com.lti.launch.db.mybatis.dto.CourseDTO">
            select id, name from courses where id = #{id}
    </select>

    <select id="findContextModulesByContextIDAndContextType" resultType="com.lti.launch.db.mybatis.dto.ContextModuleDTO">
            select id
                 , context_id
                 , context_type
                 , name
                 , position
                 , workflow_state
            from context_modules
            where context_id = #{contextID} and context_type = #{contextType}
            order by position
    </select>

    <select id="findContextTagByContextModuleID" resultType="com.lti.launch.db.mybatis.dto.ContentTagDTO">
        select id
             , content_id
             , content_type
             , title
             , position
             , workflow_state
        from content_tags where context_module_id = #{contextModuleID}
        order by position
    </select>
<!--    <select id="qnaTotalCount" resultType="int">-->
<!--        select count(*) from board.qna-->
<!--    </select>-->
<!--    <select id="findQnaAll"   resultType="com.lti.launch.db.mybatis.dto.QnaDTO">-->
<!--       select * from (-->
<!--                  select ROW_NUMBER() over () AS RN, X.*-->
<!--                  from (select a.*,-->
<!--                               (-->
<!--                                   select b.name-->
<!--                                   from users b-->
<!--                                   where a.qna_account_id = b.id) AS qna_name-->
<!--                        from board.qna AS a-->
<!--                        where a.qna_delete_YN = 'N'-->
<!--                        order by qna_no) AS X-->
<!--              ) Z where RN between #{start} and #{end}-->
<!--    </select>-->

<!--    <select id="insertQna" parameterType="com.lti.launch.db.mybatis.dto.QnaDTO" resultType="Long">-->
<!--        insert into board.qna-->
<!--        (qna_course_id,-->
<!--        qna_title,-->
<!--        qna_contents,-->
<!--        qna_user_id,-->
<!--        qna_secret,-->
<!--        qna_attach_id,-->
<!--        qna_insert_date,-->
<!--        qna_update_date-->
<!--        ) VALUES (-->
<!--        #{qna_course_id}-->
<!--        ,#{qna_title}-->
<!--        ,#{qna_contents}-->
<!--        ,#{qna_user_id}-->
<!--        ,#{qna_secret}-->
<!--        ,#{qna_attach_id}-->
<!--        ,#{qna_insert_date}-->
<!--        ,#{qna_update_date}-->
<!--        ) returning id-->

<!--    </select>-->



</mapper>
